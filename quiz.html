<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Seminar Quiz</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --card:#071022;
  --glow1:#ff5fd1;
  --glow2:#5df0ff;
  --glow3:#9b7bff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,system-ui;
  background:#05030a;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#dff;
  overflow:hidden;
}
.bg{
  position:fixed;inset:-20%;z-index:-1;
  filter:blur(70px);
  background:
    radial-gradient(40% 40% at 10% 20%, rgba(95,0,255,0.18), transparent 10%),
    radial-gradient(50% 50% at 80% 80%, rgba(255,90,150,0.12), transparent 12%),
    linear-gradient(135deg,#020617 0%, #071126 50%, #001728 100%);
  animation:hue 12s linear infinite
}
@keyframes hue{50%{filter:hue-rotate(30deg) blur(72px)}100%{filter:blur(70px)}}

.card{
  width:100%;
  max-width:720px;
  padding:26px;
  border-radius:14px;
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
  box-shadow:0 20px 60px rgba(0,0,0,0.6);
  border:1px solid rgba(255,255,255,0.03)
}
.center{display:flex;flex-direction:column;align-items:center;gap:18px}
h1{
  font-family:Orbitron,monospace;
  margin:0;
  color:var(--glow2);
  text-shadow:0 0 18px rgba(93,240,255,0.18)
}
button{
  cursor:pointer;border:0;
  padding:10px 16px;
  border-radius:10px;
  font-weight:700
}
.start-btn{
  background:linear-gradient(90deg,var(--glow2),var(--glow3));
  color:#000
}
.small{color:#aef6ff;font-size:0.95rem}

#quiz{display:none}
#question{min-height:56px;margin:8px 0;color:#e9ffff;font-size:1.05rem}
.opts{display:flex;flex-direction:column;gap:10px}

label.opt{
  display:flex;gap:12px;align-items:center;
  padding:12px;border-radius:10px;
  background:rgba(255,255,255,0.01);
  border:1px solid rgba(0,255,255,0.03);
  cursor:pointer
}
input[type=radio]{
  width:18px;height:18px;
  appearance:none;
  border-radius:6px;
  border:2px solid var(--glow2)
}
input[type=radio]:checked{
  background:linear-gradient(90deg,var(--glow2),var(--glow3));
  border-color:var(--glow3)
}

.row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-top:14px;
  flex-wrap:wrap
}
.progress{
  height:10px;
  background:rgba(255,255,255,0.03);
  border-radius:999px;
  overflow:hidden;
  width:160px
}
.bar{
  height:100%;
  width:0;
  background:linear-gradient(90deg,var(--glow1),var(--glow2));
  transition:width .25s
}
.next{
  background:linear-gradient(90deg,var(--glow1),var(--glow3));
  color:#000;
  border-radius:10px;
  padding:10px 16px
}
.next[disabled]{opacity:.55;cursor:not-allowed}

/* TIMER */
.timer{
  font-family:Orbitron,monospace;
  font-size:0.95rem;
  color:var(--glow2)
}
.timer.danger{color:#ff6b6b}

@media(max-width:560px){
  .card{padding:18px}
  .progress{width:120px}
}
</style>
</head>

<body>
<div class="bg"></div>

<div class="card center">

  <!-- START -->
  <div id="startScreen" class="center">
    <h1>AI Seminar Quiz</h1>
    <div class="small">Press start to begin</div>
    <button id="start" class="start-btn">Start</button>
  </div>

  <!-- QUIZ -->
  <div id="quiz">
    <div id="question"></div>
    <form id="opts" class="opts"></form>

    <div class="row">
      <div class="progress"><div id="bar" class="bar"></div></div>

      <div style="display:flex;gap:10px;align-items:center">
        <div id="timer" class="timer">03:00</div>
        <div id="count" class="small">0 / 0</div>
        <button id="next" class="next" disabled>Next</button>
      </div>
    </div>
  </div>

</div>

<script src="question.js"></script>
<script>
/* QUESTION SELECTION */
const pickAnyTwo=s=>{
  const b=questions.slice(s,s+20);
  for(let i=0;i<2&&i<b.length;i++){
    const j=i+Math.floor(Math.random()*(b.length-i));
    [b[i],b[j]]=[b[j],b[i]];
  }
  return b.slice(0,Math.min(2,b.length));
};
const finalQ=[];
for(let i=0;i<questions.length;i+=20) finalQ.push(...pickAnyTwo(i));
finalQ.sort(()=>Math.random()-0.5);

/* STATE */
let idx=0;
let answers=new Array(finalQ.length).fill(null);
let timeLeft=180; // 3 minutes
let timerInterval=null;

const el=id=>document.getElementById(id);
const qEl=el('question'), optsForm=el('opts');
const nextBtn=el('next'), count=el('count'), bar=el('bar');
const timerEl=el('timer');

/* TIMER */
function startTimer(){
  timerInterval=setInterval(()=>{
    timeLeft--;
    const m=String(Math.floor(timeLeft/60)).padStart(2,'0');
    const s=String(timeLeft%60).padStart(2,'0');
    timerEl.textContent=`${m}:${s}`;

    if(timeLeft<=30) timerEl.classList.add('danger');
    if(timeLeft<=0){
      clearInterval(timerInterval);
      finish();
    }
  },1000);
}

/* RENDER */
function render(){
  const q=finalQ[idx];
  qEl.textContent=q.q;
  optsForm.innerHTML='';

  q.o.forEach((t,i)=>{
    const lbl=document.createElement('label');
    lbl.className='opt';
    lbl.innerHTML=`<input type="radio" name="opt" value="${i}"><div>${t}</div>`;
    optsForm.appendChild(lbl);
    lbl.querySelector('input').addEventListener('change',e=>{
      answers[idx]=Number(e.target.value);
      nextBtn.disabled=false;
    });
  });

  count.textContent=`${idx+1} / ${finalQ.length}`;
  bar.style.width=Math.round((idx/finalQ.length)*100)+'%';
  nextBtn.disabled=true;
}

/* START */
el('start').onclick=()=>{
  el('startScreen').style.display='none';
  el('quiz').style.display='block';
  render();
  startTimer();
};

/* NEXT */
nextBtn.onclick=()=>{
  if(answers[idx]==null) return;
  idx++;
  if(idx<finalQ.length) render();
  else finish();
};

/* FINISH */
function finish(){
  clearInterval(timerInterval);
  const score=finalQ.reduce((a,q,i)=>a+(answers[i]===q.a),0);
  localStorage.setItem('quizScore',score);
  localStorage.setItem('quizTotal',finalQ.length);
  location.href='result.html';
}

/* GUARD */
if(typeof questions==='undefined'){
  el('start').disabled=true;
}
</script>
</body>
</html>
